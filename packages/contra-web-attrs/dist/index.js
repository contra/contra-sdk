"use strict";function h(e){let t=Math.floor(e),o=e%1>=.5,n=5-t-(o?1:0),r="";for(let a=0;a<t;a++)r+=`<svg width="16" height="16" viewBox="0 0 24 24" fill="#FFD700" xmlns="http://www.w3.org/2000/svg">
      <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
    </svg>`;o&&(r+=`<svg width="16" height="16" viewBox="0 0 24 24" fill="url(#half)" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <linearGradient id="half">
          <stop offset="50%" stop-color="#FFD700"/>
          <stop offset="50%" stop-color="#E5E5E5"/>
        </linearGradient>
      </defs>
      <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
    </svg>`);for(let a=0;a<n;a++)r+=`<svg width="16" height="16" viewBox="0 0 24 24" fill="#E5E5E5" xmlns="http://www.w3.org/2000/svg">
      <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
    </svg>`;return r}function u(e){let t=Object.entries(e).filter(([o,n])=>n!=null&&n!=="").map(([o,n])=>Array.isArray(n)?n.map(r=>`${encodeURIComponent(o)}=${encodeURIComponent(r)}`).join("&"):`${encodeURIComponent(o)}=${encodeURIComponent(n)}`);return t.length>0?`?${t.join("&")}`:""}var p=class{constructor(e){this.apiKey=e.apiKey,this.baseUrl=e.baseUrl||"https://api.contra.com/v1",this.timeout=e.timeout||1e4}async fetch(e,t={}){let o=`${this.baseUrl}${e}`,n=new AbortController,r=setTimeout(()=>n.abort(),this.timeout);try{let a=await fetch(o,{...t,signal:n.signal,headers:{Authorization:`Bearer ${this.apiKey}`,"Content-Type":"application/json",...t.headers}});if(clearTimeout(r),!a.ok)throw new Error(`API Error: ${a.status} ${a.statusText}`);return await a.json()}catch(a){throw clearTimeout(r),a instanceof Error&&a.name==="AbortError"?new Error(`Request timeout after ${this.timeout}ms`):a}}async listExperts(e,t={},o=1,n=20){let r={program:e,page:o,limit:n,...t},a=u(r);return await this.fetch(`/experts${a}`)}async getExpert(e){return(await this.fetch(`/experts/${e}`)).data}async searchExperts(e,t={},o=1,n=20){let r={q:e,page:o,limit:n,...t},a=u(r);return await this.fetch(`/experts/search${a}`)}};var l="data-contra-",f=(e,t)=>e.getAttribute(`${l}${t}`),g=(e,t)=>e.querySelector(t),c=(e,t)=>Array.from(e.querySelectorAll(t));function L(e){let t={};return Object.entries({languages:"languages","min-rate":"minRate","max-rate":"maxRate",location:"location",available:"available",sort:"sortBy"}).forEach(([n,r])=>{let a=f(e,n);a!=null&&(r==="languages"?t.languages=a.split(",").map(s=>s.trim()):r==="available"?t.available=a==="true":r==="minRate"||r==="maxRate"?t[r]=+a:t[r]=a)}),t}function T(e,t){let o=e.cloneNode(!0);return o.removeAttribute("style"),c(o,"[data-field]").forEach(n=>{let r=n.dataset.field,a=t[r];a!=null&&(n.tagName==="IMG"?n.src=a:n.tagName==="A"?n.href=a:n.textContent=r==="hourlyRateUSD"?`$${a}/hr`:String(a))}),g(o,"[data-stars]")?.insertAdjacentHTML("beforeend",h(t.averageReviewScore)),c(o,'[data-repeat="projects"]').forEach(n=>{let r=n.firstElementChild?.cloneNode(!0);if(!r)return;n.innerHTML="";let a=(t.projects||[]).slice(0,4);a.forEach(s=>{let d=r.cloneNode(!0);c(d,"[data-field]").forEach(i=>{let y=i.dataset.field,m=s[y];m!=null&&(i.tagName==="IMG"?i.src=m:i.tagName==="A"?i.href=m:i.textContent=m)}),n.appendChild(d)}),a.length===0&&(n.style.display="none")}),o}async function M(e,t){c(e,":scope>*:not([data-contra-template])").forEach(s=>s.remove());let o=g(e,"[data-contra-template]");if(!o)return;let n=f(e,"program"),r=L(e),{data:a}=await t.listExperts(n,r);a.forEach(s=>e.appendChild(T(o,s)))}function C(e){c(e,`[${l}filter]`).forEach(t=>{let o=f(t,"filter"),n=t instanceof HTMLSelectElement&&t.multiple;t.addEventListener("change",()=>{if(t instanceof HTMLInputElement&&t.type==="checkbox")e.setAttribute(`${l}${o}`,String(t.checked));else if(n){let r=[...t.selectedOptions].map(a=>a.value).join(",");e.setAttribute(`${l}${o}`,r)}else e.setAttribute(`${l}${o}`,t.value);e._reload()})})}async function E(){let e=JSON.parse(document.getElementById("contra-config").textContent),t=new p({apiKey:e.apiKey});document.querySelectorAll(`[${l}program]`).forEach(o=>{let n=o;n.style.position="relative",n._reload=()=>M(n,t),C(n),n._reload()})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",E):E();
//# sourceMappingURL=index.js.map
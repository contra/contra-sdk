<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üêõ Simple Debug Test</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 20px; 
            background: #f5f5f5; 
        }
        .container { 
            background: white; 
            padding: 20px; 
            border-radius: 8px; 
            margin-bottom: 20px;
            border: 2px solid #ddd;
        }
        .expert-card { 
            border: 1px solid #ccc; 
            padding: 15px; 
            margin: 10px 0; 
            border-radius: 5px; 
            background: #f9f9f9;
        }
        .filters { 
            background: #e8f4f8; 
            padding: 15px; 
            margin-bottom: 15px; 
            border-radius: 5px;
            display: flex;
            gap: 15px;
            align-items: end;
        }
        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        .filter-group label {
            font-weight: bold;
            font-size: 12px;
        }
        .filter-group input, .filter-group select {
            padding: 5px;
            border: 1px solid #ccc;
            border-radius: 3px;
        }
        .pagination { 
            background: #f0f8ff; 
            padding: 15px; 
            margin-top: 15px; 
            border-radius: 5px;
            text-align: center;
        }
        .btn { 
            padding: 8px 15px; 
            margin: 0 5px; 
            border: 1px solid #ccc; 
            background: white; 
            cursor: pointer; 
            border-radius: 3px;
        }
        .btn:hover:not(:disabled) { 
            background: #007cba; 
            color: white; 
        }
        .btn:disabled { 
            opacity: 0.5; 
            cursor: not-allowed; 
        }
        .state { 
            text-align: center; 
            padding: 20px; 
            color: #666; 
            font-style: italic;
        }
        [data-contra-template] { display: none !important; }
        .debug { 
            background: #ffffcc; 
            padding: 10px; 
            margin: 10px 0; 
            border: 1px solid #ffcc00; 
            border-radius: 3px;
            font-family: monospace;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <h1>üêõ Simple Debug Test</h1>
    <p>Testing pagination buttons preservation and filter functionality</p>

    <div class="debug" id="debug-log">Debug log will appear here...</div>

    <!-- Test Container -->
    <div class="container" data-contra-limit="2" data-contra-offset="0" data-contra-pagination="traditional">
        <h2>Traditional Pagination Test</h2>
        
        <!-- Filters -->
        <div class="filters">
            <div class="filter-group">
                <label>Availability</label>
                <select data-contra-filter="available" id="avail-filter">
                    <option value="">All</option>
                    <option value="true">Available</option>
                    <option value="false">Busy</option>
                </select>
            </div>
            <div class="filter-group">
                <label>Location</label>
                <input type="text" data-contra-filter="location" placeholder="Location" id="loc-filter">
            </div>
            <div class="filter-group">
                <label>Actions</label>
                <button data-contra-action="reload" class="btn">üîÑ Reload</button>
            </div>
        </div>
        
        <!-- Expert Grid -->
        <div class="expert-grid">
            <!-- Expert Template -->
            <div data-contra-template class="expert-card">
                <h3 data-contra-field="name">Expert Name</h3>
                <p data-contra-field="oneLiner">Description</p>
                <p>üìç <span data-contra-field="location">Location</span></p>
                <p>üí∞ <span data-contra-field="hourlyRateUSD" data-contra-format="rate">$0/hr</span></p>
            </div>
        </div>
        
        <!-- Loading State -->
        <div data-contra-loading class="state" style="display: none;">
            ‚è≥ Loading experts...
        </div>
        
        <!-- Error State -->
        <div data-contra-error class="state" style="display: none;">
            ‚ùå Error loading experts
        </div>
        
        <!-- Empty State -->
        <div data-contra-empty class="state" style="display: none;">
            üîç No experts found
        </div>
        
        <!-- Pagination -->
        <div class="pagination">
            <div data-contra-pagination-info>Loading...</div>
            <div style="margin-top: 10px;">
                <button data-contra-action="prev-page" class="btn" id="prev-btn">‚Üê Previous</button>
                <span class="btn" style="border: none; background: none;">Page 1</span>
                <button data-contra-action="next-page" class="btn" id="next-btn">Next ‚Üí</button>
            </div>
        </div>
    </div>

    <!-- Configuration -->
    <script id="contra-config" type="application/json">
    {
        "program": "kajabi_expert",
        "apiKey": "contra_4548fabb.24cecae57234e341de12a33526f35655864e5af1f9ad04d156e65d18dea1bc4a",
        "debug": true,
        "autoReload": true
    }
    </script>

    <!-- Load Runtime -->
    <script src="./dist/runtime.min.js"></script>

    <script>
        let debugLog = document.getElementById('debug-log');
        
        function addDebug(message) {
            debugLog.innerHTML += '<br>' + new Date().toLocaleTimeString() + ': ' + message;
            console.log('üêõ', message);
        }
        
        document.addEventListener('DOMContentLoaded', function() {
            addDebug('DOM loaded, waiting for runtime...');
            
            // Check if buttons exist
            setTimeout(() => {
                const prevBtn = document.getElementById('prev-btn');
                const nextBtn = document.getElementById('next-btn');
                const availFilter = document.getElementById('avail-filter');
                const locFilter = document.getElementById('loc-filter');
                
                addDebug(`Buttons exist: prev=${!!prevBtn}, next=${!!nextBtn}`);
                addDebug(`Filters exist: avail=${!!availFilter}, loc=${!!locFilter}`);
                
                if (prevBtn) {
                    addDebug(`Prev button disabled: ${prevBtn.disabled}`);
                }
                if (nextBtn) {
                    addDebug(`Next button disabled: ${nextBtn.disabled}`);
                }
            }, 2000);
            
            // Track events
            document.addEventListener('contra:expertsLoaded', (event) => {
                const { experts, totalCount, paginationMode, page, hasNextPage } = event.detail;
                addDebug(`‚úÖ Experts loaded: ${experts?.length} experts, page ${page}, hasNext: ${hasNextPage}`);
                
                // Check buttons after load
                setTimeout(() => {
                    const prevBtn = document.getElementById('prev-btn');
                    const nextBtn = document.getElementById('next-btn');
                    addDebug(`After load - Buttons exist: prev=${!!prevBtn}, next=${!!nextBtn}`);
                }, 100);
            });

            document.addEventListener('contra:filterChange', (event) => {
                addDebug(`üéõÔ∏è Filter changed: ${JSON.stringify(event.detail.filters)}`);
            });

            document.addEventListener('contra:expertsError', (event) => {
                addDebug(`‚ùå Error: ${event.detail.error.message}`);
            });
            
            // Manual filter test
            setTimeout(() => {
                addDebug('Testing manual filter change...');
                const availFilter = document.getElementById('avail-filter');
                if (availFilter) {
                    availFilter.value = 'true';
                    availFilter.dispatchEvent(new Event('change'));
                    addDebug('Triggered availability filter change to "true"');
                }
            }, 3000);
        });
    </script>
</body>
</html> 
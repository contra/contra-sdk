{"version":3,"sources":["../src/client.ts"],"names":["_ContraClient","config","endpoint","options","retries","url","controller","timeoutId","requestOptions","response","errorData","delay","resolve","ContraAPIError","data","error","cacheKey","ttl","cached","pendingKey","requestPromise","filters","params","key","value","queryString","programId","expertId","query","searchFilters","pattern","now","entries","ContraClient","message","code","status","utils","rate","rating","fullStars","hasHalfStar","emptyStars","html","func","wait","timeout","args","limit","inThrottle"],"mappings":"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","file":"index.mjs","sourcesContent":["import type {\n  ClientConfig,\n  ExpertProfile,\n  ExpertFilters,\n  ProgramSummary,\n  ListResponse,\n  ApiResponse,\n  ErrorResponse\n} from '@contra/types';\n\n/**\n * Professional Contra API Client\n * Features: Caching, retry logic, error handling, request deduplication\n */\nexport class ContraClient {\n  private config: Required<ClientConfig>;\n  private cache = new Map<string, { data: any; timestamp: number; ttl: number }>();\n  private pendingRequests = new Map<string, Promise<any>>();\n  \n  // Cache TTL settings (in milliseconds)\n  private static readonly CACHE_TTL = {\n    experts: 5 * 60 * 1000,      // 5 minutes for expert lists\n    expert: 10 * 60 * 1000,     // 10 minutes for individual experts\n    program: 30 * 60 * 1000,    // 30 minutes for program info\n    filters: 60 * 60 * 1000,    // 1 hour for available filters\n  };\n\n  constructor(config: ClientConfig) {\n    this.config = {\n      baseUrl: 'https://api.contra.com',\n      timeout: 10000,\n      debug: false,\n      ...config,\n    };\n\n    if (this.config.debug) {\n      console.log('[ContraClient] Initialized with config:', this.config);\n    }\n  }\n\n  /**\n   * Core fetch method with retry logic and error handling\n   */\n  private async fetch<T>(\n    endpoint: string,\n    options: RequestInit = {},\n    retries = 3\n  ): Promise<T> {\n    const url = `${this.config.baseUrl}${endpoint}`;\n    const controller = new AbortController();\n    const timeoutId = setTimeout(() => controller.abort(), this.config.timeout);\n\n    const requestOptions: RequestInit = {\n      ...options,\n      signal: controller.signal,\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${this.config.apiKey}`,\n        ...options.headers,\n      },\n    };\n\n    try {\n      if (this.config.debug) {\n        console.log(`[ContraClient] Fetching: ${url}`, requestOptions);\n      }\n\n      const response = await fetch(url, requestOptions);\n      clearTimeout(timeoutId);\n\n      if (!response.ok) {\n        // Try to parse error response\n        let errorData: ErrorResponse;\n        try {\n          errorData = await response.json();\n        } catch {\n          errorData = {\n            code: `HTTP_${response.status}`,\n            message: response.statusText || 'Unknown error'\n          };\n        }\n\n        // Retry on 5xx errors or rate limits\n        if ((response.status >= 500 || response.status === 429) && retries > 0) {\n          const delay = Math.pow(2, 3 - retries) * 1000; // Exponential backoff\n          await new Promise(resolve => setTimeout(resolve, delay));\n          return this.fetch<T>(endpoint, options, retries - 1);\n        }\n\n        throw new ContraAPIError(errorData.message, errorData.code, response.status);\n      }\n\n      const data = await response.json();\n      \n      if (this.config.debug) {\n        console.log(`[ContraClient] Response:`, data);\n      }\n\n      return data;\n\n    } catch (error) {\n      clearTimeout(timeoutId);\n      \n      if (error instanceof ContraAPIError) {\n        throw error;\n      }\n\n      if (error instanceof Error && error.name === 'AbortError') {\n        throw new ContraAPIError(`Request timeout after ${this.config.timeout}ms`, 'TIMEOUT');\n      }\n\n      // Network or other errors - retry if we have retries left\n      if (retries > 0) {\n        const delay = Math.pow(2, 3 - retries) * 1000;\n        await new Promise(resolve => setTimeout(resolve, delay));\n        return this.fetch<T>(endpoint, options, retries - 1);\n      }\n\n      throw new ContraAPIError(\n        error instanceof Error ? error.message : 'Unknown error',\n        'NETWORK_ERROR'\n      );\n    }\n  }\n\n  /**\n   * Get from cache or fetch with request deduplication\n   */\n  private async fetchWithCache<T>(\n    cacheKey: string,\n    endpoint: string,\n    ttl: number,\n    options?: RequestInit\n  ): Promise<T> {\n    // Check cache first\n    const cached = this.cache.get(cacheKey);\n    if (cached && Date.now() - cached.timestamp < cached.ttl) {\n      if (this.config.debug) {\n        console.log(`[ContraClient] Cache hit: ${cacheKey}`);\n      }\n      return cached.data;\n    }\n\n    // Check for pending request (deduplication)\n    const pendingKey = `${endpoint}${JSON.stringify(options)}`;\n    if (this.pendingRequests.has(pendingKey)) {\n      if (this.config.debug) {\n        console.log(`[ContraClient] Request deduplication: ${pendingKey}`);\n      }\n      return this.pendingRequests.get(pendingKey)!;\n    }\n\n    // Make the request\n    const requestPromise = this.fetch<T>(endpoint, options);\n    this.pendingRequests.set(pendingKey, requestPromise);\n\n    try {\n      const data = await requestPromise;\n      \n      // Cache the result\n      this.cache.set(cacheKey, {\n        data,\n        timestamp: Date.now(),\n        ttl\n      });\n\n      return data;\n    } finally {\n      this.pendingRequests.delete(pendingKey);\n    }\n  }\n\n  /**\n   * Build query string from filters\n   */\n  private buildQueryString(filters: ExpertFilters): string {\n    const params = new URLSearchParams();\n    \n    Object.entries(filters).forEach(([key, value]) => {\n      if (value != null && value !== '') {\n        if (Array.isArray(value)) {\n          params.set(key, value.join(','));\n        } else {\n          params.set(key, String(value));\n        }\n      }\n    });\n\n    const queryString = params.toString();\n    return queryString ? `?${queryString}` : '';\n  }\n\n  /**\n   * Get program information\n   */\n  async getProgram(programId: string): Promise<ProgramSummary> {\n    const cacheKey = `program:${programId}`;\n    const endpoint = `/public-api/programs/${programId}`;\n    \n    const response = await this.fetchWithCache<ApiResponse<ProgramSummary>>(\n      cacheKey,\n      endpoint,\n      ContraClient.CACHE_TTL.program\n    );\n    \n    return response.data;\n  }\n\n  /**\n   * List experts with advanced filtering and caching\n   */\n  async listExperts(\n    programId: string,\n    filters: ExpertFilters = {}\n  ): Promise<ListResponse<ExpertProfile>> {\n    const queryString = this.buildQueryString(filters);\n    const cacheKey = `experts:${programId}:${JSON.stringify(filters)}`;\n    const endpoint = `/public-api/programs/${programId}/experts${queryString}`;\n    \n    return this.fetchWithCache<ListResponse<ExpertProfile>>(\n      cacheKey,\n      endpoint,\n      ContraClient.CACHE_TTL.experts\n    );\n  }\n\n  /**\n   * Get individual expert details\n   */\n  async getExpert(expertId: string): Promise<ExpertProfile> {\n    const cacheKey = `expert:${expertId}`;\n    const endpoint = `/public-api/experts/${expertId}`;\n    \n    const response = await this.fetchWithCache<ApiResponse<ExpertProfile>>(\n      cacheKey,\n      endpoint,\n      ContraClient.CACHE_TTL.expert\n    );\n    \n    return response.data;\n  }\n\n  /**\n   * Search experts (with client-side fallback if API doesn't support it)\n   */\n  async searchExperts(\n    programId: string,\n    query: string,\n    filters: ExpertFilters = {}\n  ): Promise<ListResponse<ExpertProfile>> {\n    const searchFilters = { ...filters, q: query };\n    return this.listExperts(programId, searchFilters);\n  }\n\n  /**\n   * Get available filter options for a program\n   */\n  async getFilterOptions(programId: string): Promise<{\n    languages: string[];\n    locations: string[];\n    rateRanges: Array<{ min: number; max: number; label: string }>;\n  }> {\n    const cacheKey = `filters:${programId}`;\n    const endpoint = `/public-api/programs/${programId}/filters`;\n    \n    const response = await this.fetchWithCache<ApiResponse<any>>(\n      cacheKey,\n      endpoint,\n      ContraClient.CACHE_TTL.filters\n    );\n    \n    return response.data;\n  }\n\n  /**\n   * Clear cache (useful for forced refreshes)\n   */\n  clearCache(pattern?: string): void {\n    if (pattern) {\n      // Clear specific cache entries\n      for (const key of this.cache.keys()) {\n        if (key.includes(pattern)) {\n          this.cache.delete(key);\n        }\n      }\n    } else {\n      // Clear all cache\n      this.cache.clear();\n    }\n\n    if (this.config.debug) {\n      console.log(`[ContraClient] Cache cleared${pattern ? ` (pattern: ${pattern})` : ''}`);\n    }\n  }\n\n  /**\n   * Get cache statistics\n   */\n  getCacheStats(): {\n    size: number;\n    entries: Array<{ key: string; age: number; ttl: number }>;\n  } {\n    const now = Date.now();\n    const entries = Array.from(this.cache.entries()).map(([key, value]) => ({\n      key,\n      age: now - value.timestamp,\n      ttl: value.ttl\n    }));\n\n    return {\n      size: this.cache.size,\n      entries\n    };\n  }\n}\n\n/**\n * Custom error class for API errors\n */\nexport class ContraAPIError extends Error {\n  constructor(\n    message: string,\n    public code: string,\n    public status?: number\n  ) {\n    super(message);\n    this.name = 'ContraAPIError';\n  }\n}\n\n/**\n * Utility functions\n */\nexport const utils = {\n  /**\n   * Format hourly rate with proper handling of null values\n   */\n  formatRate(rate: number | null): string {\n    return rate ? `$${rate}/hr` : 'Rate on request';\n  },\n\n  /**\n   * Generate star rating HTML\n   */\n  renderStars(rating: number): string {\n    const fullStars = Math.floor(rating);\n    const hasHalfStar = (rating % 1) >= 0.5;\n    const emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0);\n    \n    let html = '';\n    \n    // Full stars\n    for (let i = 0; i < fullStars; i++) {\n      html += `<svg class=\"star star-full\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"#FFD700\">\n        <path d=\"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z\"/>\n      </svg>`;\n    }\n    \n    // Half star\n    if (hasHalfStar) {\n      html += `<svg class=\"star star-half\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\">\n        <defs>\n          <linearGradient id=\"half-${rating}\">\n            <stop offset=\"50%\" stop-color=\"#FFD700\"/>\n            <stop offset=\"50%\" stop-color=\"#E5E5E5\"/>\n          </linearGradient>\n        </defs>\n        <path fill=\"url(#half-${rating})\" d=\"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z\"/>\n      </svg>`;\n    }\n    \n    // Empty stars\n    for (let i = 0; i < emptyStars; i++) {\n      html += `<svg class=\"star star-empty\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"#E5E5E5\">\n        <path d=\"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z\"/>\n      </svg>`;\n    }\n    \n    return html;\n  },\n\n  /**\n   * Debounce function for search inputs\n   */\n  debounce<T extends (...args: any[]) => any>(\n    func: T,\n    wait: number\n  ): (...args: Parameters<T>) => void {\n    let timeout: NodeJS.Timeout;\n    return (...args: Parameters<T>) => {\n      clearTimeout(timeout);\n      timeout = setTimeout(() => func(...args), wait);\n    };\n  },\n\n  /**\n   * Throttle function for scroll events\n   */\n  throttle<T extends (...args: any[]) => any>(\n    func: T,\n    limit: number\n  ): (...args: Parameters<T>) => void {\n    let inThrottle: boolean;\n    return (...args: Parameters<T>) => {\n      if (!inThrottle) {\n        func(...args);\n        inThrottle = true;\n        setTimeout(() => inThrottle = false, limit);\n      }\n    };\n  }\n}; "]}
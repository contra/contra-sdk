{"version":3,"sources":["../src/index.ts","../src/utils.ts","../src/client.ts"],"sourcesContent":["// Core client\nexport { ContraClient } from './client.js';\n\n// Types\nexport type {\n  ContraFilters,\n  ContraProject,\n  ContraExpert,\n  ContraApiResponse,\n  ContraClientConfig,\n} from './types.js';\n\n// Utilities\nexport { starSVG, buildQueryString } from './utils.js'; ","/**\n * Generate star rating SVG based on score (0-5)\n */\nexport function starSVG(score: number): string {\n  const fullStars = Math.floor(score);\n  const hasHalfStar = score % 1 >= 0.5;\n  const emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0);\n\n  let html = '';\n  \n  // Full stars\n  for (let i = 0; i < fullStars; i++) {\n    html += `<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"#FFD700\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path d=\"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z\"/>\n    </svg>`;\n  }\n  \n  // Half star\n  if (hasHalfStar) {\n    html += `<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"url(#half)\" xmlns=\"http://www.w3.org/2000/svg\">\n      <defs>\n        <linearGradient id=\"half\">\n          <stop offset=\"50%\" stop-color=\"#FFD700\"/>\n          <stop offset=\"50%\" stop-color=\"#E5E5E5\"/>\n        </linearGradient>\n      </defs>\n      <path d=\"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z\"/>\n    </svg>`;\n  }\n  \n  // Empty stars\n  for (let i = 0; i < emptyStars; i++) {\n    html += `<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"#E5E5E5\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path d=\"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z\"/>\n    </svg>`;\n  }\n  \n  return html;\n}\n\n/**\n * Build query string from object\n */\nexport function buildQueryString(params: Record<string, any>): string {\n  const filtered = Object.entries(params)\n    .filter(([_, value]) => value !== undefined && value !== null && value !== '')\n    .map(([key, value]) => {\n      if (Array.isArray(value)) {\n        return value.map(v => `${encodeURIComponent(key)}=${encodeURIComponent(v)}`).join('&');\n      }\n      return `${encodeURIComponent(key)}=${encodeURIComponent(value)}`;\n    });\n  \n  return filtered.length > 0 ? `?${filtered.join('&')}` : '';\n} ","import type { ContraClientConfig, ContraFilters, ContraExpert, ContraApiResponse } from './types.js';\nimport { buildQueryString } from './utils.js';\n\nexport class ContraClient {\n  private apiKey: string;\n  private baseUrl: string;\n  private timeout: number;\n\n  constructor(config: ContraClientConfig) {\n    this.apiKey = config.apiKey;\n    this.baseUrl = config.baseUrl || 'https://api.contra.com/v1';\n    this.timeout = config.timeout || 10000;\n  }\n\n  /**\n   * Generic fetch wrapper with authentication and error handling\n   */\n  private async fetch<T>(endpoint: string, options: RequestInit = {}): Promise<T> {\n    const url = `${this.baseUrl}${endpoint}`;\n    \n    const controller = new AbortController();\n    const timeoutId = setTimeout(() => controller.abort(), this.timeout);\n\n    try {\n      const response = await fetch(url, {\n        ...options,\n        signal: controller.signal,\n        headers: {\n          'Authorization': `Bearer ${this.apiKey}`,\n          'Content-Type': 'application/json',\n          ...options.headers,\n        },\n      });\n\n      clearTimeout(timeoutId);\n\n      if (!response.ok) {\n        throw new Error(`API Error: ${response.status} ${response.statusText}`);\n      }\n\n      const data = await response.json();\n      return data;\n    } catch (error) {\n      clearTimeout(timeoutId);\n      if (error instanceof Error && error.name === 'AbortError') {\n        throw new Error(`Request timeout after ${this.timeout}ms`);\n      }\n      throw error;\n    }\n  }\n\n  /**\n   * List experts with optional filters\n   */\n  async listExperts(\n    program: string,\n    filters: ContraFilters = {},\n    page = 1,\n    limit = 20\n  ): Promise<ContraApiResponse<ContraExpert[]>> {\n    const queryParams = {\n      program,\n      page,\n      limit,\n      ...filters,\n    };\n\n    const queryString = buildQueryString(queryParams);\n    const response = await this.fetch<ContraApiResponse<ContraExpert[]>>(`/experts${queryString}`);\n    \n    return response;\n  }\n\n  /**\n   * Get a single expert by ID\n   */\n  async getExpert(expertId: string): Promise<ContraExpert> {\n    const response = await this.fetch<{ data: ContraExpert }>(`/experts/${expertId}`);\n    return response.data;\n  }\n\n  /**\n   * Search experts by query string\n   */\n  async searchExperts(\n    query: string,\n    filters: ContraFilters = {},\n    page = 1,\n    limit = 20\n  ): Promise<ContraApiResponse<ContraExpert[]>> {\n    const queryParams = {\n      q: query,\n      page,\n      limit,\n      ...filters,\n    };\n\n    const queryString = buildQueryString(queryParams);\n    const response = await this.fetch<ContraApiResponse<ContraExpert[]>>(`/experts/search${queryString}`);\n    \n    return response;\n  }\n} "],"mappings":"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","names":[]}
# Contributing to the Contra Webflow SDK

This guide provides instructions for developers who are maintaining and contributing to this SDK.

## Project Structure

- **`/src`**: Contains all the TypeScript source code.
  - `runtime.ts`: The main runtime script for Webflow. This is the entry point for the CDN build.
  - `index.ts`: The main entry point for the NPM package.
- **`/dist`**: Contains the final, built JavaScript files. This directory is generated by the build process and should not be edited manually.
- **`package.json`**: Defines the project, its dependencies, and the build scripts.
- **`tsup.config.ts`**: The configuration file for `tsup`, our build tool. It defines how to build both the NPM package and the CDN script.

## Development

1.  **Install Dependencies:**
    ```bash
    npm install
    ```

2.  **Run the Dev Server:**
    This command will watch for changes in the `src` directory and automatically rebuild the project.
    ```bash
    npm run dev
    ```

## Publishing a New Version (via GitHub Tags)

Follow these steps precisely to publish a new version of the SDK. This workflow uses Git tags to version the releases, which are then automatically available via the jsDelivr CDN. **This process does not involve `npm publish`.**

### Step 1: Build the Project

Ensure your local code is clean and then run the build to generate the final `dist` files with your latest changes.

```bash
npm run build
```

### Step 2: Commit the Built Files

The `dist` directory is tracked by Git in this project. You must add the newly built files to a commit.

```bash
git add dist/
git commit -m "build: Generate distribution files for vX.X.X"
```
*(Replace `vX.X.X` with the new version number)*

### Step 3: Create a New Git Tag

Create a new Git tag that matches the version you are releasing. This is what jsDelivr uses for versioning.

- For a small bug fix (e.g., v2.0.0 -> v2.0.1):
  ```bash
  git tag v2.0.1
  ```
- For a new feature (e.g., v2.0.0 -> v2.1.0):
  ```bash
  git tag v2.1.0
  ```

### Step 4: Push to GitHub

Push your commits and the new tag to GitHub. This is the final step that makes the new version live on jsDelivr.

```bash
git push && git push --tags
```

### Step 5: Verify on jsDelivr

Wait a few minutes for jsDelivr to pick up the new tag from GitHub. You can then verify that the new version is available at:

`https://cdn.jsdelivr.net/gh/contra/contra-sdk@<NEW_TAG>/dist/runtime.min.js`

(Replace `<NEW_TAG>` with the tag you just created, e.g., `v2.0.1`) 